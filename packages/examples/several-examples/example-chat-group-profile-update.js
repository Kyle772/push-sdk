import { CONSTANTS, PushAPI } from '@pushprotocol/restapi';
import { ethers } from 'ethers';
import input from 'input';

console.log("Hello... what's my purpose?")
console.log("To train all the hackers..")

// Requesting private key from user
// This is a demo to show how profile of a user can be changed
console.log("This demo requires a wallet to be initialized via private key so that the profile can be applied");
console.log("Alternatively just leave the input empty and we will create a new user");
let pk = await input.text('Enter private key of your wallet -');
if (pk.length > 0 && pk.substr(0, 2) !== '0x') {
  pk = '0x' + pk;
}

// Loading signer from private key, ideally this is the wallet you will connect for group chat
const signer = pk.length > 0 ? new ethers.Wallet(pk) : ethers.Wallet.createRandom();

// Print wallet address
console.log('Wallet address: ', signer.address);

// Initialize wallet user, pass 'prod' instead of 'staging' for mainnet apps
let userAlice = await PushAPI.initialize(signer, { env: CONSTANTS.ENV.PROD });
console.log('User initialized the user', userAlice);

// Get chat id
let chatid = await input.text('Enter ChatId for the group -');

// Manually input this as base64 encoded image might be too long
let desc = await input.text('Enter chat group description -');
const base64Image = 'data:image/png;base64,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';

userAlice = await userAlice.chat.group.update(chatid, { 
  description: desc !== '' ? desc : null,
  image: base64Image 
});
console.log('User updated the profile', userAlice);